<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Web Thi To√°n L·ªõp 1</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: auto; padding: 10px; }
    .question { margin: 15px 0; padding-bottom: 10px; border-bottom: 1px solid #ddd; }
    .timer { font-size: 20px; color: red; font-weight: bold; }
    button { padding: 8px 14px; margin-top: 10px; cursor: pointer; }
    input[type="text"] { padding: 6px; width: 120px; font-size: 16px; }
    label { font-size: 16px; }
  </style>
</head>
<body>

<h1>Web Thi To√°n L·ªõp 1</h1>

<div id="login">
  <p>Nh·∫≠p t√™n h·ªçc sinh:</p>
  <input id="studentName" placeholder="Nguy·ªÖn Y·∫øn, Tu·∫•n, Kh√°nh..." />
  <button onclick="startExam()">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
  <p><small>Danh s√°ch h·ª£p l·ªá: Nguy·ªÖn Y·∫øn, Ninh Y·∫øn, Ng·ªçc, B·∫£o, H√¢n, Kh√°nh, Tu·∫•n</small></p>
</div>

<div id="exam" style="display:none;">
  <p class="timer">‚è± Th·ªùi gian c√≤n l·∫°i: <span id="time">30:00</span></p>
  <div id="questionBox"></div>
  <button onclick="submitExam()">N·ªôp b√†i</button>
</div>

<div id="result" style="display:none;"></div>

<script>
const students = ["Nguy·ªÖn Y·∫øn", "Ninh Y·∫øn", "Ng·ªçc", "B·∫£o", "H√¢n", "Kh√°nh", "Tu·∫•n"];

const questions = [
  { type: "mcq", question: "1 + 1 = ?", options: ["1", "2", "3"], answer: "2" },
  { type: "input", question: "2 + 1 = ?", answer: "3" },
  { type: "mcq", question: "3 - 1 = ?", options: ["1", "2", "3"], answer: "2" },
  { type: "input", question: "4 - 2 = ?", answer: "2" },
  { type: "mcq", question: "2 + 2 = ?", options: ["3", "4", "5"], answer: "4" },
  { type: "input", question: "5 - 3 = ?", answer: "2" },

  { type: "mcq", question: "S·ªë l·ªõn h∆°n: 5 hay 3?", options: ["5", "3"], answer: "5" },
  { type: "input", question: "ƒêi·ªÅn s·ªë c√≤n thi·∫øu: 1, 2, __, 4", answer: "3" },
  { type: "mcq", question: "üçéüçéüçé c√≥ m·∫•y qu·∫£?", options: ["2", "3", "4"], answer: "3" },
  { type: "input", question: "S·ªë li·ªÅn sau c·ªßa 4 l√†?", answer: "5" },

  { type: "mcq", question: "4 + 1 = ?", options: ["4", "5", "6"], answer: "5" },
  { type: "input", question: "6 - 1 = ?", answer: "5" },
  { type: "mcq", question: "S·ªë b√© h∆°n: 2 hay 7?", options: ["2", "7"], answer: "2" },
  { type: "input", question: "ƒêi·ªÅn s·ªë c√≤n thi·∫øu: 5, 6, __, 8", answer: "7" },
  { type: "mcq", question: "C√≥ 3 con m√®o, th√™m 1 con n·ªØa. C√≥ t·∫•t c·∫£ bao nhi√™u con?", options: ["3", "4", "5"], answer: "4" },

  { type: "input", question: "7 - 2 = ?", answer: "5" },
  { type: "mcq", question: "S·ªë n√†o l·ªõn h∆°n?", options: ["9", "6"], answer: "9" },
  { type: "input", question: "S·ªë li·ªÅn tr∆∞·ªõc c·ªßa 5 l√†?", answer: "4" },
  { type: "mcq", question: "1 + 4 = ?", options: ["4", "5", "6"], answer: "5" },
  { type: "input", question: "8 - 3 = ?", answer: "5" },

  { type: "mcq", question: "2, 4, __, 8 (ƒëi·ªÅn s·ªë ƒë√∫ng)", options: ["5", "6", "7"], answer: "6" },
  { type: "input", question: "10 - 5 = ?", answer: "5" },
  { type: "mcq", question: "C√≥ 2 b·∫°n, th√™m 2 b·∫°n n·ªØa. C√≥ t·∫•t c·∫£ m·∫•y b·∫°n?", options: ["2", "3", "4"], answer: "4" },
  { type: "input", question: "3 + 3 = ?", answer: "6" },
  { type: "mcq", question: "S·ªë n√†o b√© h∆°n?", options: ["1", "9"], answer: "1" },

  { type: "input", question: "9 - 4 = ?", answer: "5" },
  { type: "mcq", question: "0 + 5 = ?", options: ["0", "4", "5"], answer: "5" },
  { type: "input", question: "ƒêi·ªÅn s·ªë c√≤n thi·∫øu: 6, __, 8", answer: "7" },
  { type: "mcq", question: "S·ªë li·ªÅn sau c·ªßa 9 l√†?", options: ["8", "9", "10"], answer: "10" },
  { type: "input", question: "5 + 0 = ?", answer: "5" }
];

let selectedQuestions = [];
let timer;
let timeLeft = 1800;

function startExam() {
  const name = document.getElementById("studentName").value.trim();
  if (!students.includes(name)) {
    alert("T√™n kh√¥ng h·ª£p l·ªá! H√£y nh·∫≠p ƒë√∫ng t√™n trong danh s√°ch.");
    return;
  }
  document.getElementById("login").style.display = "none";
  document.getElementById("exam").style.display = "block";
  selectedQuestions = shuffle([...questions]).slice(0, 30);
  renderQuestions();
  startTimer();
}

function renderQuestions() {
  const box = document.getElementById("questionBox");
  box.innerHTML = "";
  selectedQuestions.forEach((q, i) => {
    let html = `<div class="question"><p><b>C√¢u ${i+1}:</b> ${q.question}</p>`;
    if (q.type === "mcq") {
      q.options.forEach(opt => {
        html += `<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label><br>`;
      });
    } else {
      html += `<input type="text" name="q${i}" placeholder="Nh·∫≠p ƒë√°p √°n..." />`;
    }
    html += `</div>`;
    box.innerHTML += html;
  });
}

function startTimer() {
  timer = setInterval(() => {
    timeLeft--;
    const min = Math.floor(timeLeft / 60);
    const sec = timeLeft % 60;
    document.getElementById("time").textContent = `${min}:${sec.toString().padStart(2, "0")}`;
    if (timeLeft <= 0) submitExam();
  }, 1000);
}

function submitExam() {
  clearInterval(timer);
  let correct = 0;
  let resultHTML = "<h2>K·∫øt qu·∫£</h2>";
  selectedQuestions.forEach((q, i) => {
    let userAnswer = "";
    if (q.type === "mcq") {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      userAnswer = selected ? selected.value : "";
    } else {
      const input = document.querySelector(`input[name="q${i}"]`);
      userAnswer = input ? input.value.trim() : "";
    }
    const isCorrect = userAnswer.toLowerCase() === q.answer.toLowerCase();
    if (isCorrect) correct++;
    resultHTML += `<p>C√¢u ${i+1}: ${isCorrect ? "‚úÖ ƒê√∫ng" : "‚ùå Sai"} | B·∫°n l√†m: ${userAnswer || "Ch∆∞a l√†m"} | ƒê√°p √°n: <b>${q.answer}</b></p>`;
  });
  resultHTML += `<h3>üèÜ T·ªïng k·∫øt: ƒê√∫ng ${correct}/30 ‚Äì Sai ${30 - correct}</h3>`;
  document.getElementById("exam").style.display = "none";
  const resultBox = document.getElementById("result");
  resultBox.style.display = "block";
  resultBox.innerHTML = resultHTML;
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}
</script>

</body>
</html>
